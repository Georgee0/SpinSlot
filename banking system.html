<!DOCTYPE html>

<html>
    <head>
        <script>
            const atm = ()=>{

                //new details function
                const newDetails = () => {
                    const updateAcct = prompt('Enter acct no');
                    const updatePin = prompt('Enter pin');
                    const updateBvn = prompt('Enter bvn');
                };
                // response function
                const checkResponse = () => {
                    const response = prompt('Do you want to perform another task?\n1-yes\n2-no');
                    if(response == yes) {
                        checkLoginDetails();
                    } else if (response == no){
                        exit();
                    }
                };

                //const userName = ['user1', 'user2', 'user3', 'user4'];
                const userPin = [1234, 9009, 7777, 5050]; 
                const userAcct = [000000, 111111, 111000, 000111]; 
                const userBalance = [500000, 750000, 200000, 450000]; 
                const userBvn = [56005, 11544, 77777, 25700]; 

                alert("Welcome To Ecobank")
                const input = prompt('1.Enter account details\n2.Create account');
                if(input == 1){
                        
                    const pin = prompt('Enter pin!');

                    //looping through the userPin array to check if pin exist already 
                    for(let i = 0; i < userPin.length; i++){
                        let valuePins = userPin[i];
                        const numPin = Number(pin);
                    
                        // checking user login details
                        const checkLoginDetails = () =>{
                                
                            if(numPin == valuePins){

                                const input2 = prompt('What will you want to do?\n1-Withdraw\n2-Balance Check\n3-Transfer\n4-Change Pin\n5-Check Bvn\n6-Update Account Details\n7-Exit')
                                if(input2 == 1){
                                    const amt = prompt('Amount to withdraw');
                                    const amtWithd = userBalance[0] - amt;
                                    userBalance.shift();
                                    userBalance.unshift(amtWithd);
                                    alert(amt +' withdrew sucessful');
                                    checkResponse();
                                } else if(input2 == 2){
                                    alert(userBalance[0])
                                } else if(input2 == 3){
                                    const transfer = prompt('how much do you want to transfer');
                                    const newBalance = userBalance[0] - transfer;
                                    userBalance.shift();
                                    userBalance.unshift(newBalance);
                                    alert(transfer +' was sucessfully transfered');
                                } else if (input2 == 4){
                                    prompt('Enter new pin');
                                    alert('New pin updated sucessfully');
                                } else if(input2 == 5){
                                        alert(bvn[0]);
                                } else if(input2 == 6){
                                    alert('Update details');
        
                                    newDetails();
                                        
                                    userAcct[0] = updateAcct;
                                    userPin[0] = updatePin;
                                    userBvn[0] = updateBvn;
        
                                } else{
                                    exit();
                                }                   
                                } else{
                                    alert('Invalid pin! Try again.');
                                }
                            }
                        checkLoginDetails();
                    }    
                } else if(input == 2){
                    newDetails();
                    userAcct.push(updateAcct);
                    userPin.push(updatePin);
                    userBvn.push(updateBvn);
                }
                // To check if any of the new  acct details exist in the database already
                    const checking = () =>{

                        for(let i = 0; i < userAcct.length; i++){
                            const valueAcct = userAcct[i];
                            if(updateAcct == valueAcct){
                                return true;
                            };
                        }    
                        for(let i = 0; i < userPin.length; i++){
                            const valuePins = pins[i];
                            if(updatePin == valuePins){
                                return true;
                            };
                        }
                        for(let i = 0; i < userBvn.length; i++){
                            const valueBvn = bvn[i];
                            if(updateBvn == valueBvn){
                                return true;
                            };
                        }
                    }
                    if(checking() === true){
                        alert('Details exist already.');
                    } else {
                        alert('Account created successfully!');
                    }                                                 
                
            }
            atm();            
            
        </script>

    </head>
    <body></body>

</html>